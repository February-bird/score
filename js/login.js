import{findOneByIndex,STORE_NAME_2}from"./db/db.js";import{addClass,removeClass}from"./tools/dom.js";let doc=document,inputs=doc.querySelectorAll(".input-ele"),btn=doc.querySelector(".btn");function isActiveBtn(){return inputs[0].value&&inputs[1].value?(btn.disabled=!1,addClass(btn,"enabled"),!0):(btn.disabled=!0,removeClass(btn,"enabled"),!1)}isActiveBtn(),inputs.forEach(e=>{e.addEventListener("input",()=>{isActiveBtn()&&(removeClass(doc.querySelector(".tips"),"show"),removeClass(inputs[0],"border-tips"),removeClass(inputs[1],"border-tips"))})}),btn.addEventListener("click",async e=>{e.preventDefault();var e=new FormData(doc.forms[0]),t=e.get("username"),e=e.get("password").trim().toUpperCase(),s=await findOneByIndex(STORE_NAME_2,"stuNo",t);s?.stuNo==t&&s?.password==e?location.href=`./score.html?id=${t}&&name=`+s.name:(addClass(doc.querySelector(".tips"),"show"),inputs.forEach(e=>addClass(e,"border-tips")))});