import{stuInfo,score}from"./data.js";let DB_NAME="score_query",STORE_NAME_1="score",STORE_NAME_2="stuInfo",DBrequest=indexedDB.open(DB_NAME,14),db=(DBrequest.onupgradeneeded=function(){var e=this.result;createStore(e,"stuInfo","id","stuNo","stuNo",stuInfo),createStore(e,"score","stuNo","stuNo","stuNo",score)},DBrequest.onerror=e=>{alert("你的浏览器不支持,请更换浏览器或清除浏览器缓存再试!")},await getDB(DBrequest));function createStore(e,r,t,o,n,s){e.objectStoreNames.contains(r)&&e.deleteObjectStore(r);t=e.createObjectStore(r,{keyPath:t});t.createIndex(o,n,{unique:!0}),t.transaction.addEventListener("complete",()=>{let t=e.transaction(r,"readwrite").objectStore(r);s.forEach(e=>t.add(e))})}function getDB(e){return new Promise(t=>{e.onsuccess=e=>t(e.target.result)})}function findOneByIndex(e,t,r){return getDB(db.transaction(e).objectStore(e).index(t).get(r))}export{findOneByIndex,STORE_NAME_1,STORE_NAME_2};